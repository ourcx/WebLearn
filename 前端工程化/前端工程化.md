#  webpack

####  构建工具

习惯再node里面编写代码后，再回到前端编写html、css、js这些东西会很不便，不能放心使用模块化规范（浏览器兼容），即使可以使用模块化也会面临很多的加载问题

所以需要一个工具，对代码进行打包。将多模块打包成一个文件，解决了兼容性问题，又解决了模块过多的问题

作用：通过这个工具，可以将ESM规范编写的代码，转化为旧的js语法，使得所有浏览器可以去支持这些代码

 ####  Webpack

- 使用步骤

  1. 初始化项目` npm init -y `

  2. 安装依赖webpack、webpack-cli(源代码和命令行工具)

  3. 在项目创建src目录,然后编写代码(index.js是默认入口文件)

     ![74851796273](C:\Users\zxh\Desktop\前端\前端工程化\前端工程化.assets\1748517962734.png)

     设置为开发依赖

  4. 使用命令行`npx webpack`打包,打包完成后看你的dist目录 

> 下载代码加-d就是开发环境的代码,不加就是生产环境

打包生产的数据,和是否执行有关





####  配置文件讲解

手动配置项目文件的配置很少

配置文件就是webpack.config.js,用来配置webpack的运行

这个文件是在node环境运行的

这里要使用node的模块化规范,src内的,才遵循前端的开发规范

```javascript
module.export={
    //node模块化
    mode:"production"//生产模式,设置了打包的模式
    //development开发模式
}
```





####  entry

build执行的前提是build：“webpack”存在

![74920578217](C:\Users\zxh\Desktop\前端\前端工程化\前端工程化.assets\1749205782178.png)

依赖

```javascript
module.export={
    //node模块化
    mode:"production"//生产模式,设置了打包的模式
    //development开发模式
    entry:""
    //用来指定打包时的主文件,默认./src/index.js
    //这个entry可以传递数组,打包多个文件 
    //也可以传递对象,也是打包多个文件
}
```


####  output

代码打包后的地址

![74920797735](C:\Users\zxh\Desktop\前端\前端工程化\前端工程化.assets\1749207977356.png)

和entry同级的

 ![74920806678](C:\Users\zxh\Desktop\前端\前端工程化\前端工程化.assets\1749208066781.png)

用name这个变量代替打包的名字

![74920812887](C:\Users\zxh\Desktop\前端\前端工程化\前端工程化.assets\1749208128870.png)

不同的打包文件名



####  loader

 工程化的思想就是所有文件都要被js管理

loader让你可以打包非js文件

以css为例

- 使用css-loader可以处理js中的样式

- 步骤

  - 1. 安装yarn add css-loader -D\

    2. 配置:

       ![74920946927](C:\Users\zxh\Desktop\前端\前端工程化\前端工程化.assets\1749209469278.png)

       虽然叫loader,但是配置的时候写作module

    3. /\.css$/i叫做匹配css结尾的东西

    4. 这个东西就是把css转为js代码1

    5. 还需要配置

       ![74920984800](C:\Users\zxh\Desktop\前端\前端工程化\前端工程化.assets\1749209848006.png)

       让css可以被使用

- 处理图片等资源

  ![74921008909](C:\Users\zxh\Desktop\前端\前端工程化\前端工程化.assets\1749210089092.png)

  可以写出`/\.(jpg|png|gif)$/i`







####  babel

 在编写js代码的时候,经常要使用js的一些新的特性,但是新特性在旧的浏览器中兼容性不好

我们就用了一个折中的办法,用新特性编写代码,但是代码编写完成时我们可以通过一些工具将新的代码转为旧代码

就是使用babel来进行转化成旧的js,提高兼容性

我们要使用babel,就要引入babel的loader才能使用

 ![74921179005](C:\Users\zxh\Desktop\前端\前端工程化\前端工程化.assets\1749211790053.png)

对加载器进行详细的配置

- 在package.json配置兼容性

  ![74921225427](C:\Users\zxh\Desktop\前端\前端工程化\前端工程化.assets\1749212254274.png)

  ![74921227440](C:\Users\zxh\Desktop\前端\前端工程化\前端工程化.assets\1749212274406.png)

  配置这些都是可以的



####  插件

不对代码处理的功能,写在这里,为webpack扩展了功能

- html-webpack-plugin

  这个插件可以在打包后,自动在打包目录生产html页面,不用手动配置

  配置在plugins;[]

  ![74921272633](C:\Users\zxh\Desktop\前端\前端工程化\前端工程化.assets\1749212726334.png)

  在webpack.config.js

  ![74921283930](C:\Users\zxh\Desktop\前端\前端工程化\前端工程化.assets\1749212839307.png)

  可以指定一些基本信息

   ![74921305099](C:\Users\zxh\Desktop\前端\前端工程化\前端工程化.assets\1749213050998.png)

  根据一个模板来完成创建

- ​

  ​

####  服务器

避免每次更新都要重启

就安装一个`yarn add -D webpack-dev-server`

让webpack得到一个开发的服务器

运行`yarn webpackserver`

打开一个服务器,完美

可以热重载了

![74921398193](C:\Users\zxh\Desktop\前端\前端工程化\前端工程化.assets\1749213981935.png)

这里要有命令值





####  sourceMap

 编译以后的代码混淆太多了,必须调试源码才能完成 

![74921436187](C:\Users\zxh\Desktop\前端\前端工程化\前端工程化.assets\1749214361872.png)

在webpack.config.js配置一个工具

可以让编译后的代码和源码进行一个映射

![74921444708](C:\Users\zxh\Desktop\前端\前端工程化\前端工程化.assets\1749214447085.png)

多了一个map,可以直接去断点调试











#  vite

​    下一代工具链

 也是前端构建工具

相较于webpack，vite使用了不同的运行方式

- 开发时，并不对代码打包，而是直接用ESM的方式来运行项目
- 在项目部署的时候，再对项目打包

![74931140706](C:\Users\zxh\Desktop\前端\前端工程化\前端工程化.assets\1749311407063.png)

 主要是md快

打包完的文件不能直接运行，要依靠服务器运行

 

 ![74931221237](C:\Users\zxh\Desktop\前端\前端工程化\前端工程化.assets\1749312212376.png)一些配置 

![74931232832](C:\Users\zxh\Desktop\前端\前端工程化\前端工程化.assets\1749312328322.png)

vite还提供了一个快速创建项目的能力

就是npm create vite

使用命令构建



####  vite配置

webpack处理css要配置loder，但在vite里面，不需要这样去设置

webpack比较底层，vite配置好了很多，比较方能

配置文件名：vite.config.js![74936820338](C:\Users\zxh\Desktop\前端\前端工程化\前端工程化.assets\1749368203383.png)

写上一个denfinConfig,可以让你在写代码的时候,有一个代码的提示

![74936826848](C:\Users\zxh\Desktop\前端\前端工程化\前端工程化.assets\1749368268481.png)

配置一个兼容性处理的插件

![74936850657](C:\Users\zxh\Desktop\前端\前端工程化\前端工程化.assets\1749368506570.png)

![74936838889](C:\Users\zxh\Desktop\前端\前端工程化\前端工程化.assets\1749368388891.png)

打包的第一个是兼容性语法,下面哪个是最新的语法

  
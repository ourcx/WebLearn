####  ip子网划分

32位二进制，网络位和主机位组成，采用点分十进制表示

192.168.1.12/24或者192.168.1.12 255.255.255.0

在这个段的ip开始的是网络号，结尾是广播地址，可用ip就是192.168.1.1/24到193.168.1.254/24

![75721723852](C:\Users\zxh\Desktop\前端\软考\下午题复习.assets\1757217238524.png)

1. 排序，先分配多的，再分配少的
2. 从小到大






####  VLAN

基本作用划分广播域

![75734763044](C:\Users\zxh\Desktop\前端\软考\下午题复习.assets\1757347630448.png)

使用一个小标签802.1Q TAG来使用

access连接终端pc，trunk口连接交换机与交换机，Hybrid是pc和交换机，QinQ是一些大二层的处理

![75734804373](C:\Users\zxh\Desktop\前端\软考\下午题复习.assets\1757348043732.png)

![75734838989](C:\Users\zxh\Desktop\前端\软考\下午题复习.assets\1757348389892.png)

不带标签的都要带标签进入，然后再进行过滤

![75734856446](C:\Users\zxh\Desktop\前端\软考\下午题复习.assets\1757348564463.png)

匹配到多种划分方式，按优先级去选择

![75734867587](C:\Users\zxh\Desktop\前端\软考\下午题复习.assets\1757348675879.png)

主机划分不了vlan只能再交换机端口划分

![75734874541](C:\Users\zxh\Desktop\前端\软考\下午题复习.assets\1757348745415.png)

第一个打上了10的标签，是一种推的方式，第二种是拉的方式

 trunk支持多个vlan通过

![75734892760](C:\Users\zxh\Desktop\前端\软考\下午题复习.assets\1757348927605.png)

![75734905646](C:\Users\zxh\Desktop\前端\软考\下午题复习.assets\1757349056469.png)

主要是配置路由器的两个路由，还要注意交换机的对应路由的口是trunk，pc的口是access

![75734912118](C:\Users\zxh\Desktop\前端\软考\下午题复习.assets\1757349121183.png)

划分子网越多，会消耗越多的广播号和网络号

super-vlan只能在三层交换机上面进行划分

子vlan把消息发给网关，然后对外通信，或者内部子网之间进行通信

![75737941312](C:\Users\zxh\Desktop\前端\软考\下午题复习.assets\1757379413120.png)

配置命令

**Max vlan**

![75737950112](C:\Users\zxh\Desktop\前端\软考\下午题复习.assets\1757379501128.png)

互通性是在vlan内部可以访问，隔离型是都不能访问

![75740467870](C:\Users\zxh\Desktop\前端\软考\下午题复习.assets\1757404678700.png)

两种arp代理，分别是vlan内部和之间

![75740475270](C:\Users\zxh\Desktop\前端\软考\下午题复习.assets\1757404752708.png)

一种vlan标签技术，防止vlan的冲突

![75740504735](C:\Users\zxh\Desktop\前端\软考\下午题复习.assets\1757405047350.png)

对这两个口配置标签，带上3或者4

![75740513887](C:\Users\zxh\Desktop\前端\软考\下午题复习.assets\1757405138877.png)

![75740524693](C:\Users\zxh\Desktop\前端\软考\下午题复习.assets\1757405246935.png)

端口隔离方式：端口隔离，max-vlan，流标签

想实现互通，就只能使用arp代理





####  STP生成树协议

![75740832743](C:\Users\zxh\Desktop\前端\软考\下午题复习.assets\1757408327431.png)

prizeBPDU用来进行生成树计算和维护生成树拓扑的报文

TCN BPDU是网络拓扑变化的时候，用来通知相关设备的报文

当开机的时候，第一个和第三个id是一样的

端口id由优先级组成

![75740896873](C:\Users\zxh\Desktop\前端\软考\下午题复习.assets\1757408968739.png)

这个是用来破环的，防止出现环路，按一定原则堵塞端口

交换机默认优先级是32768.端口默认优先级是128

![75749182409](C:\Users\zxh\Desktop\前端\软考\下午题复习.assets\1757491824096.png)

阻塞状态下，只是接收BPGU不发送

侦听的时候可以发送

学习状态会学习相关的地址

转发就是可以接收发送BPGU，也能接收发送数据包

![75749220920](C:\Users\zxh\Desktop\前端\软考\下午题复习.assets\1757492209203.png)

Alternate是给根端口做替代

Backup是给指定端口做替代

RSTP的优化，可以快速收敛等等等，又用了MSTP去优化

![75749239212](C:\Users\zxh\Desktop\前端\软考\下午题复习.assets\1757492392129.png)

边缘端口一定要配置

![75749261456](C:\Users\zxh\Desktop\前端\软考\下午题复习.assets\1757492614563.png)

BPDU保护一般配备在边缘端口

![75749271285](C:\Users\zxh\Desktop\前端\软考\下午题复习.assets\1757492712852.png)

建立多颗生成树，保证负载均衡



![75749288714](C:\Users\zxh\Desktop\前端\软考\下午题复习.assets\1757492887147.png)





####  静态路由

![75751455999](C:\Users\zxh\Desktop\前端\软考\下午题复习.assets\1757514559998.png)

![75751511190](C:\Users\zxh\Desktop\前端\软考\下午题复习.assets\1757515111904.png)

![75751520730](C:\Users\zxh\Desktop\前端\软考\下午题复习.assets\1757515207309.png)

不同路由器的优先级不一样

![75751579299](C:\Users\zxh\Desktop\前端\软考\下午题复习.assets\1757515792999.png)

![75751595004](C:\Users\zxh\Desktop\前端\软考\下午题复习.assets\1757515950043.png)

生成看一个二叉树用于查找

 

路由类型

![75751661466](C:\Users\zxh\Desktop\前端\软考\下午题复习.assets\1757516614660.png)

![75751665686](C:\Users\zxh\Desktop\前端\软考\下午题复习.assets\1757516656862.png)

 ![75751696973](C:\Users\zxh\Desktop\前端\软考\下午题复习.assets\1757516969737.png)

![75751714148](C:\Users\zxh\Desktop\前端\软考\下午题复习.assets\1757517141480.png)

![75751722147](C:\Users\zxh\Desktop\前端\软考\下午题复习.assets\1757517221476.png)

上面的路由失效了，下面的路由会浮起来使用

通过修改优先级实现

路由是一种三层技术





####  ACL

![75751796389](C:\Users\zxh\Desktop\前端\软考\下午题复习.assets\1757517963895.png)

一种匹配工具

![75751810676](C:\Users\zxh\Desktop\前端\软考\下午题复习.assets\1757518106764.png)

默认步长是5

后面的不是掩码，是通配符掩码

通配符的0和1可以不连续

反掩码要连续

![75751843040](C:\Users\zxh\Desktop\前端\软考\下午题复习.assets\1757518430409.png)

![75751897187](C:\Users\zxh\Desktop\前端\软考\下午题复习.assets\1757518971872.png)

acl有数字和命名两种方式

![75751907785](C:\Users\zxh\Desktop\前端\软考\下午题复习.assets\1757519077858.png)

![75751935673](C:\Users\zxh\Desktop\前端\软考\下午题复习.assets\1757519356736.png)

 ![75751976796](C:\Users\zxh\Desktop\前端\软考\下午题复习.assets\1757519767965.png)

没有定义的acl会允许所以，有acl没规则也会允许

定义了没匹配上就全拒绝

![75751982956](C:\Users\zxh\Desktop\前端\软考\下午题复习.assets\1757519829562.png)

高级acl的协议号更高了

![75751992971](C:\Users\zxh\Desktop\前端\软考\下午题复习.assets\1757519929717.png)

![75751996747](C:\Users\zxh\Desktop\前端\软考\下午题复习.assets\1757519967473.png)





时间范围

![75751998909](C:\Users\zxh\Desktop\前端\软考\下午题复习.assets\1757519989092.png)







####  DHCP

![75763812548](C:\Users\zxh\Desktop\前端\软考\下午题复习.assets\1757638125482.png)

自动获取和分配ip地址

![75763828760](C:\Users\zxh\Desktop\前端\软考\下午题复习.assets\1757638287607.png)

![75763872066](C:\Users\zxh\Desktop\前端\软考\下午题复习.assets\1757638720662.png)

 ![75763877736](C:\Users\zxh\Desktop\前端\软考\下午题复习.assets\1757638777361.png)

![75763939325](C:\Users\zxh\Desktop\前端\软考\下午题复习.assets\1757639393259.png)

![75763959148](C:\Users\zxh\Desktop\前端\软考\下午题复习.assets\1757639591480.png)

![75763960363](C:\Users\zxh\Desktop\前端\软考\下午题复习.assets\1757639603631.png)

![75763970954](C:\Users\zxh\Desktop\前端\软考\下午题复习.assets\1757639709541.png)

先用已经绑定mac地址的ip

再去找关系比较弱的 ![75763981367](C:\Users\zxh\Desktop\前端\软考\下午题复习.assets\1757639813678.png)

![75763985768](C:\Users\zxh\Desktop\前端\软考\下午题复习.assets\1757639857688.png)

一个安全工具

![75764027310](C:\Users\zxh\Desktop\前端\软考\下午题复习.assets\1757640273104.png)

指定网关和网段，然后就是排除一些ip地址

![75764050711](C:\Users\zxh\Desktop\前端\软考\下午题复习.assets\1757640507118.png)
relay是用来做中继的，把收到的dhcp报文中继出去

![75764061174](C:\Users\zxh\Desktop\前端\软考\下午题复习.assets\1757640611747.png)

![75764072656](C:\Users\zxh\Desktop\前端\软考\下午题复习.assets\1757640726569.png)

上述配置是给a部门的配置

ARP detection是检测mac地址有没有被伪造的东西

![75764220551](C:\Users\zxh\Desktop\前端\软考\下午题复习.assets\1757642205516.png)

![75764309276](C:\Users\zxh\Desktop\前端\软考\下午题复习.assets\1757643092767.png)

vlan的一些功能

![75766426374](C:\Users\zxh\Desktop\前端\软考\下午题复习.assets\1757664263749.png)

根据上下文写

![75766427704](C:\Users\zxh\Desktop\前端\软考\下午题复习.assets\1757664277048.png)





####  vrrp协议

![75766484681](C:\Users\zxh\Desktop\前端\软考\下午题复习.assets\1757664846812.png)

虚拟路由器，配置虚拟网关相关的

![75766504121](C:\Users\zxh\Desktop\前端\软考\下午题复习.assets\1757665041217.png)

组播的ip地址和mac地址是有对应关系的

224.0.0.xxx开头的是一个周知地址，是给一些专门的协议使用的ip组播地址

![75766537437](C:\Users\zxh\Desktop\前端\软考\下午题复习.assets\1757665374379.png)

把两台路由器进行了一个虚拟生成了一个虚拟的arp，ip，mac地址

![75766571331](C:\Users\zxh\Desktop\前端\软考\下午题复习.assets\1757665713310.png)

比优先级去进行选举，一样就去比mac地址

master过期的时候，会有另外一个去替代他

主动退出也会让优先级变成了零

![75766625738](C:\Users\zxh\Desktop\前端\软考\下午题复习.assets\1757666257382.png)

先发送一个免费的vrrp报文：发送的地址和接收方的地址是一样的

![75766643040](C:\Users\zxh\Desktop\前端\软考\下午题复习.assets\1757666430403.png)

除了做备份，也能完成负载分担

![75766657465](C:\Users\zxh\Desktop\前端\软考\下午题复习.assets\1757666574657.png)

设备回复之后，就会恢复过来，进行抢占式更新

立即抢占可能导致网络不稳定，会抖动，要设置一个抢占延时，等待一段时间去抢占

![75766680657](C:\Users\zxh\Desktop\前端\软考\下午题复习.assets\1757666806578.png)

端口损坏不是路由器损坏，需要用联动功能去监听，然后进行一个切换



**配置vrrp**

![75802430856](C:\Users\zxh\Desktop\前端\软考\下午题复习.assets\1758024308569.png)





####  NAT

 ![75809231241](C:\Users\zxh\Desktop\前端\软考\下午题复习.assets\1758092312418.png)

NAT的转换

![75809281676](C:\Users\zxh\Desktop\前端\软考\下午题复习.assets\1758092816768.png)

![75809300026](C:\Users\zxh\Desktop\前端\软考\下午题复习.assets\1758093000260.png)

![75809329407](C:\Users\zxh\Desktop\前端\软考\下午题复习.assets\1758093294075.png)

![75809335660](C:\Users\zxh\Desktop\前端\软考\下午题复习.assets\1758093356602.png)

![75809349537](C:\Users\zxh\Desktop\前端\软考\下午题复习.assets\1758093495370.png)

动态nat就是有一个地址池

![75809366736](C:\Users\zxh\Desktop\前端\软考\下午题复习.assets\1758093667366.png)

![75809375823](C:\Users\zxh\Desktop\前端\软考\下午题复习.assets\1758093758233.png)

![75809385864](C:\Users\zxh\Desktop\前端\软考\下午题复习.assets\1758093858647.png)

这个是要你去登记的，两边是不关心地址转化的，不影响

![75809392087](C:\Users\zxh\Desktop\前端\软考\下午题复习.assets\1758093920870.png)

可以做端口转化，少一个no-reatp

![75809840789](C:\Users\zxh\Desktop\前端\软考\下午题复习.assets\1758098407894.png)

 ![75809898891](C:\Users\zxh\Desktop\前端\软考\下午题复习.assets\1758098988910.png)

![75809916769](C:\Users\zxh\Desktop\前端\软考\下午题复习.assets\1758099167691.png)

![75809938970](C:\Users\zxh\Desktop\前端\软考\下午题复习.assets\1758099389701.png)

![75809945650](C:\Users\zxh\Desktop\前端\软考\下午题复习.assets\1758099456501.png)

![75809950750](C:\Users\zxh\Desktop\前端\软考\下午题复习.assets\1758099507503.png)

![75809958106](C:\Users\zxh\Desktop\前端\软考\下午题复习.assets\1758099581063.png)

不在一个网段的时候，会形成三层环路，不会让网络出现无限循环，但是会产生很多无用的数据包，浪费资源

所以要匹配映射表，没有匹配到就直接丢弃

不在一个网段一定要配置，在的话就不用了



路由器模式

混合模式上面有ip，接口没有，接口配ip地址就是路由模式





####  BFD监测链路可达性

![75810301474](C:\Users\zxh\Desktop\前端\软考\下午题复习.assets\1758103014748.png)

通过hello报文得到邻居的可达性，这个是很慢的

![75810356639](C:\Users\zxh\Desktop\前端\软考\下午题复习.assets\1758103566391.png)

![75810370950](C:\Users\zxh\Desktop\前端\软考\下午题复习.assets\1758103709508.png)

![75810373196](C:\Users\zxh\Desktop\前端\软考\下午题复习.assets\1758103731967.png)

down状态收到up状态会让down状态不变

 ![75810518802](C:\Users\zxh\Desktop\前端\软考\下午题复习.assets\1758105188026.png)

目标ip地址写自己的地址

![75810539601](C:\Users\zxh\Desktop\前端\软考\下午题复习.assets\1758105396011.png)

![75810545079](C:\Users\zxh\Desktop\前端\软考\下午题复习.assets\1758105450791.png)

![75810627302](C:\Users\zxh\Desktop\前端\软考\下午题复习.assets\1758106273022.png)

![75810644636](C:\Users\zxh\Desktop\前端\软考\下午题复习.assets\1758106446360.png)

为了防止敲错，会有一个commit的操作

![75810666235](C:\Users\zxh\Desktop\前端\软考\下午题复习.assets\1758106662353.png)



![75810685590](C:\Users\zxh\Desktop\前端\软考\下午题复习.assets\1758106855906.png)

对方不需要nqa



![75810692082](C:\Users\zxh\Desktop\前端\软考\下午题复习.assets\1758106920827.png)

敏感链路用BFD，轻量就是IP-Link，要全面分析的话就是NQA





####  链路聚合和设备堆叠

提升带宽

网络可靠性

方便

![75829692872](C:\Users\zxh\Desktop\前端\软考\下午题复习.assets\1758296928726.png)

![75829723534](C:\Users\zxh\Desktop\前端\软考\下午题复习.assets\1758297235340.png)

这是一个自动配置的方法

![75829742799](C:\Users\zxh\Desktop\前端\软考\下午题复习.assets\1758297427992.png)

越小越优

12就变成活动的了，3不活动，不看对端的情况

![75829756765](C:\Users\zxh\Desktop\前端\软考\下午题复习.assets\1758297567650.png)

![75829800925](C:\Users\zxh\Desktop\前端\软考\下午题复习.assets\1758298009259.png)

将接口hash化，然后进行区分

![75829803339](C:\Users\zxh\Desktop\前端\软考\下午题复习.assets\1758298033398.png)

不配置默认是手工模式

![75829831093](C:\Users\zxh\Desktop\前端\软考\下午题复习.assets\1758298310936.png)

堆叠和集群

![75829864861](C:\Users\zxh\Desktop\前端\软考\下午题复习.assets\1758298648611.png)

![75829882290](C:\Users\zxh\Desktop\前端\软考\下午题复习.assets\1758298822906.png)

便于管理

![75829891251](C:\Users\zxh\Desktop\前端\软考\下午题复习.assets\1758298912517.png)

![75829916517](C:\Users\zxh\Desktop\前端\软考\下午题复习.assets\1758299165173.png)

![75829934462](C:\Users\zxh\Desktop\前端\软考\下午题复习.assets\1758299344628.png)

光纤连接这些东西

![75829959024](C:\Users\zxh\Desktop\前端\软考\下午题复习.assets\1758299590248.png)

![75829973278](C:\Users\zxh\Desktop\前端\软考\下午题复习.assets\1758299732784.png)

最早启动的是主，优先高的是主

![75829980861](C:\Users\zxh\Desktop\前端\软考\下午题复习.assets\1758299808610.png)

新成员不参与抢占

![75829984202](C:\Users\zxh\Desktop\前端\软考\下午题复习.assets\1758299842025.png)

这些东西要同步

![75829990182](C:\Users\zxh\Desktop\前端\软考\下午题复习.assets\1758299901823.png)

配置文件

![75829995438](C:\Users\zxh\Desktop\前端\软考\下午题复习.assets\1758299954383.png)

![75830020434](C:\Users\zxh\Desktop\前端\软考\下午题复习.assets\1758300204348.png)

![75830027319](C:\Users\zxh\Desktop\前端\软考\下午题复习.assets\1758300273194.png)

配置麻烦

后期升级版本麻烦



vrrp也能做主备，防止环路

![75830037765](C:\Users\zxh\Desktop\前端\软考\下午题复习.assets\1758300377654.png)











####  常见路由协议

![75904297864](C:\Users\zxh\Desktop\前端\软考\下午题复习.assets\1759042978649.png)

BGP是用内部网关的学到的路由进行分发，所以没有涉及到具体的算法

**RIP协议的基本原理**

![75904311862](C:\Users\zxh\Desktop\前端\软考\下午题复习.assets\1759043118628.png)

组播的效率会高一点

![75904319292](C:\Users\zxh\Desktop\前端\软考\下午题复习.assets\1759043192921.png)

rip里面有一些时间定时器

更新计时器一般默认是30S

老化计时器一般是180S，没有收到更新后会取消掉，放到回收栈

垃圾收集计时器，老化的路由在回收栈里面，呆了120S没有更新，就会去删除

![75904338894](C:\Users\zxh\Desktop\前端\软考\下午题复习.assets\1759043388947.png)

![75904362717](C:\Users\zxh\Desktop\前端\软考\下午题复习.assets\1759043627174.png)

刚才的哪个时间是不会在两台路由器里面进行协商，不用保持一致

![75904368843](C:\Users\zxh\Desktop\前端\软考\下午题复习.assets\1759043688430.png)

环路避免

![75904389931](C:\Users\zxh\Desktop\前端\软考\下午题复习.assets\1759043899316.png)

从别人哪里拿到的，不要去告诉其他人

![75904396262](C:\Users\zxh\Desktop\前端\软考\下午题复习.assets\1759043962626.png)

把学到的告诉其他人，不过是给16跳的给别人

![75904407442](C:\Users\zxh\Desktop\前端\软考\下午题复习.assets\1759044074423.png)

![75904418789](C:\Users\zxh\Desktop\前端\软考\下午题复习.assets\1759044187892.png)

更多是使用手工汇总

![75904446776](C:\Users\zxh\Desktop\前端\软考\下午题复习.assets\1759044467760.png)

![75904450910](C:\Users\zxh\Desktop\前端\软考\下午题复习.assets\1759044509103.png)



![75904460344](C:\Users\zxh\Desktop\前端\软考\下午题复习.assets\1759044603446.png)

明文认证可以控制在系统里面密码的显示方式，默认是不显示密码，而是乱码



####  ospf路由协议

![75904550190](C:\Users\zxh\Desktop\前端\软考\下午题复习.assets\1759045501906.png)

ospf的路由是计算出来的，rip是靠收集数据得来的，故：ospf的优先级更高

![75904558840](C:\Users\zxh\Desktop\前端\软考\下午题复习.assets\1759045588405.png)

三大表

- 邻居表
- LSDB表
- ospf路由表

![75904572759](C:\Users\zxh\Desktop\前端\软考\下午题复习.assets\1759045727595.png)

这个是储存的数据表

![75904603985](C:\Users\zxh\Desktop\前端\软考\下午题复习.assets\1759046039853.png)

先发hello，然后发目录，比对，有缺少的就去请求，还有发送，请求到了需要进行确认ACK

状态机

![75904627803](C:\Users\zxh\Desktop\前端\软考\下午题复习.assets\1759046278033.png)





####  bgp路由协议

应用层协议

![76083612204](C:\Users\zxh\Desktop\前端\软考\下午题复习.assets\1760836122042.png)

![76083642210](C:\Users\zxh\Desktop\前端\软考\下午题复习.assets\1760836422102.png)

触发更新，防止占用太多带宽

![76083653428](C:\Users\zxh\Desktop\前端\软考\下午题复习.assets\1760836534281.png)

衡量路径的好坏

![76083661417](C:\Users\zxh\Desktop\前端\软考\下午题复习.assets\1760836614179.png)

![76083669202](C:\Users\zxh\Desktop\前端\软考\下午题复习.assets\1760836692020.png)

可以跨路由器的

![76083677974](C:\Users\zxh\Desktop\前端\软考\下午题复习.assets\1760836779749.png)

三倍的keepalive时间没有收到，会失活

![76083681199](C:\Users\zxh\Desktop\前端\软考\下午题复习.assets\1760836811997.png)

后期的更新就是触发式更新

updata可能是增加路由或者减少路由

![76083688539](C:\Users\zxh\Desktop\前端\软考\下午题复习.assets\1760836885395.png)

这种网络，推荐用环回口建立链接

![76083712974](C:\Users\zxh\Desktop\前端\软考\下午题复习.assets\1760837129741.png)、

结构，Marker协议是无意义的1分隔先

类型

![76083715809](C:\Users\zxh\Desktop\前端\软考\下午题复习.assets\1760837158097.png)

![76083726264](C:\Users\zxh\Desktop\前端\软考\下午题复习.assets\1760837262649.png)

最终状态是Established，其他都是过渡状态

![76083740622](C:\Users\zxh\Desktop\前端\软考\下午题复习.assets\1760837406220.png)

![76083754710](C:\Users\zxh\Desktop\前端\软考\下午题复习.assets\1760837547101.png)

![76083779196](C:\Users\zxh\Desktop\前端\软考\下午题复习.assets\1760837791965.png)

宣告的网络号要和表一样，network

![76083783310](C:\Users\zxh\Desktop\前端\软考\下午题复习.assets\1760837833100.png)

对方收到路由然后就去学习

![76083793360](C:\Users\zxh\Desktop\前端\软考\下午题复习.assets\1760837933600.png)

![76083794908](C:\Users\zxh\Desktop\前端\软考\下午题复习.assets\1760837949086.png)





**通告原则**

![76083802921](C:\Users\zxh\Desktop\前端\软考\下午题复习.assets\1760838029218.png**)

路由黑洞，就是有的路由会吞掉其他路由发的相信，所以会有同步原则来限制，但是很笨，吧IBGP放到IGP里面去

![76083848425](C:\Users\zxh\Desktop\前端\软考\下午题复习.assets\1760838484257.png)

通告最优

![76083851519](C:\Users\zxh\Desktop\前端\软考\下午题复习.assets\1760838515192.png)

防止环路的方式：水平分隔

![76083858157](C:\Users\zxh\Desktop\前端\软考\下午题复习.assets\1760838581578.png)

![76083924677](C:\Users\zxh\Desktop\前端\软考\下午题复习.assets\1760839246777.png)

![76083948610](C:\Users\zxh\Desktop\前端\软考\下午题复习.assets\1760839486108.png)


#  局域网

![74789324823](C:\Users\zxh\Desktop\前端\软考\第三章.assets\1747893248235.png)

####  csma cd

![74795635626](C:\Users\zxh\Desktop\前端\软考\第三章.assets\1747956356262.png)

红色框的是两个重要的架构

**局域网拓扑结构**

![74795646189](C:\Users\zxh\Desktop\前端\软考\第三章.assets\1747956461890.png)

混合是是常用的互联网结构

 csma的三种监听算法

![74795662697](C:\Users\zxh\Desktop\前端\软考\第三章.assets\1747956626976.png)

**cd**，冲突检测

一开始会检测介质是否空闲，如果空闲就立刻发送

![74795721374](C:\Users\zxh\Desktop\前端\软考\第三章.assets\1747957213740.png)

与csma相比，csma/cd充分利用传播延迟小于传输延迟的特性，减少了冲突后信道的浪费（发现错误及时停止）

并非能减少冲突的概率，只是在碰撞发生时可以及时检测并处理







####  二进制指数退避算法

 只能降低冲突的概率![74795875777](C:\Users\zxh\Desktop\前端\软考\第三章.assets\1747958757770.png)

![74795892909](C:\Users\zxh\Desktop\前端\软考\第三章.assets\1747958929098.png)

 时间片T



####  最小帧长计算

![74795962814](C:\Users\zxh\Desktop\前端\软考\第三章.assets\1747959628144.png)

确认帧很小，就被忽略了

 ![74799777640](C:\Users\zxh\Desktop\前端\软考\第三章.assets\1747997776402.png)



####  以太网帧结构

![74796224513](C:\Users\zxh\Desktop\前端\软考\第三章.assets\1747962245132.png)

   实际上最多就运1500B 在以太网帧

在tcp段最多云1480字节

![74796259231](C:\Users\zxh\Desktop\前端\软考\第三章.assets\1747962592315.png)

运输层到网络层，到数据链路层

![74796292819](C:\Users\zxh\Desktop\前端\软考\第三章.assets\1747962928198.png)

这种题hhh   tcp报头也算ip里面

udp的格式

![74796303278](C:\Users\zxh\Desktop\前端\软考\第三章.assets\1747963032788.png)





####  以太网的物理层规范

- 以太网（10M）物理介质命名规范v

![74799824256](C:\Users\zxh\Desktop\前端\软考\第三章.assets\1747998242561.png)

传3600m那个，是模拟信号

- 快速以太网802.3u（100M）

  ![74799865924](C:\Users\zxh\Desktop\前端\软考\第三章.assets\1747998659243.png)

  utp和stp

- 千兆以太网802.3Z/802.3b（1000M）

  ![74799906387](C:\Users\zxh\Desktop\前端\软考\第三章.assets\1747999063871.png)

编码4![74799927438](C:\Users\zxh\Desktop\前端\软考\第三章.assets\1747999274381.png)

![74799947070](C:\Users\zxh\Desktop\前端\软考\第三章.assets\1747999470705.png)

以太网标准

- 万兆以太网802.3ae（10G）

  ![74799962524](C:\Users\zxh\Desktop\前端\软考\第三章.assets\1747999625244.png)

![74799971424](C:\Users\zxh\Desktop\前端\软考\第三章.assets\1747999714241.png)

这些接口的速率不一样



####  虚拟局域网

VLAN基础

虚拟局域网VLAN

根据管理功能，组织机构或者应用对交换居于网进行分段而形成的逻辑网络

不桶VLAN通信必须经过三层设备：路由器，三层交换机，防火墙

冲突域和广播域：

1. 一个中继器和集线器是一个冲突域
2. 网桥/交换机的一个接口为一个冲突域
3. 一个vlan为一个广播域，交换机默认所有接口都在VLAN1

![74814436370](C:\Users\zxh\Desktop\前端\软考\第三章.assets\1748144363703.png)

交换机的接口为一个冲突域，扩大了可用性

![74814445262](C:\Users\zxh\Desktop\前端\软考\第三章.assets\1748144452623.png)

VLAN划分：

跨三层互通

![74814467805](C:\Users\zxh\Desktop\前端\软考\第三章.assets\1748144678052.png)

![74814473847](C:\Users\zxh\Desktop\前端\软考\第三章.assets\1748144738475.png)

####  802.1Q标签

VLAN的实现就是在以太网帧里面插入了一个标签实现的，大小是4B

![74814480129](C:\Users\zxh\Desktop\前端\软考\第三章.assets\1748144801290.png)

VLAN是4094个可用的，VXLAN主要是虚拟机的使用，比VLAN厉害，标识符很多，VNI是24位的数据

这个标签插在源MAC地址后面

![74814498938](C:\Users\zxh\Desktop\前端\软考\第三章.assets\1748144989382.png)

QinQ可用标记出4094*4094个VLAN

![74814515074](C:\Users\zxh\Desktop\前端\软考\第三章.assets\1748145150746.png)

一个是同一VLAN二层隔离

**VLAN划分命令**

![74814518916](C:\Users\zxh\Desktop\前端\软考\第三章.assets\1748145189169.png)



####  广播风暴和MAC地址表震荡

![74822662827](C:\Users\zxh\Desktop\前端\软考\第三章.assets\1748226628278.png)

使用冗余设计解决单点故障的问题，但是带来了一个严重问题

- 二层环路问题

![74822676530](C:\Users\zxh\Desktop\前端\软考\第三章.assets\1748226765309.png)

![74822821856](C:\Users\zxh\Desktop\前端\软考\第三章.assets\1748228218561.png)

pc的报文绕一圈，进入0/2口，导致SW3以为pc在0/2口，导致MAC表一直在变化

####  生成树技术STP

![74822858279](C:\Users\zxh\Desktop\前端\软考\第三章.assets\1748228582795.png)

![74822864863](C:\Users\zxh\Desktop\前端\软考\第三章.assets\1748228648635.png)

防止环路，保障网络冗余

 **路径开销**

![74822885307](C:\Users\zxh\Desktop\前端\软考\第三章.assets\1748228853078.png)

802.1t比较精细，带宽越大，开销越小

####  生成树计算

![74822890347](C:\Users\zxh\Desktop\前端\软考\第三章.assets\1748228903474.png)

步骤详解

1. 确定根桥：选择优先级和MAC地址加起来最小的值，根桥是一个设备

   根桥的接口不会被阻塞

   ![74822902668](C:\Users\zxh\Desktop\前端\软考\第三章.assets\1748229026687.png)

2. 选择根端口RP，非根桥到根桥最近的端口

   根端口就是有最低根路径的接口

   ![74822908543](C:\Users\zxh\Desktop\前端\软考\第三章.assets\1748229085438.png)

    开销一样的，开对方的桥id和端口id，选小的

3. 每个段选择一个指定端口：先选指定桥，指定桥上面的是指定端口

   指定桥就是一个SWX

   ![74822950037](C:\Users\zxh\Desktop\前端\软考\第三章.assets\1748229500373.png)

   ​

   根桥上的端口是指定端口，开销一样看PID和MAC

4. 选择非指定端口

   ![74822966490](C:\Users\zxh\Desktop\前端\软考\第三章.assets\1748229664905.png)

   既不是根端口，也不是指定端口的，就是阻塞端口

   ​

常见的生成树协议

![74826704149](C:\Users\zxh\Desktop\前端\软考\第三章.assets\1748267041495.png)

使用最多的生成树协议是MSTP

网桥ID由2字节的优先级和6字节的MAC地址组成

![74833844295](C:\Users\zxh\Desktop\前端\软考\第三章.assets\1748338442958.png)

 





#### 城域网

![74843075023](C:\Users\zxh\Desktop\前端\软考\第三章.assets\1748430750231.png)

 VXLAN可以穿越广域网，可以自动化建造，方便使用，多用于数据中心等

